(()=>{"use strict";(()=>{const e=[{small:"ё",shift:"Ё",code:"Backquote",type:"letter",isFn:!1},{small:"1",shift:"!",code:"Digit1",type:"digit",isFn:!1},{small:"2",shift:'"',code:"Digit2",type:"digit",isFn:!1},{small:"3",shift:"№",code:"Digit3",type:"digit",isFn:!1},{small:"4",shift:";",code:"Digit4",type:"digit",isFn:!1},{small:"5",shift:"%",code:"Digit5",type:"digit",isFn:!1},{small:"6",shift:":",code:"Digit6",type:"digit",isFn:!1},{small:"7",shift:"?",code:"Digit7",type:"digit",isFn:!1},{small:"8",shift:"*",code:"Digit8",type:"digit",isFn:!1},{small:"9",shift:"(",code:"Digit9",type:"digit",isFn:!1},{small:"0",shift:")",code:"Digit0",type:"digit",isFn:!1},{small:"-",shift:"_",code:"Minus",type:"digit",isFn:!1},{small:"=",shift:"+",code:"Equal",type:"digit",isFn:!1},{small:"Backspace",shift:"Backspace",code:"Backspace",type:"fn",isFn:!0},{small:"Tab",shift:"Tab",code:"Tab",type:"fn",isFn:!0},{small:"й",shift:"Й",code:"KeyQ",type:"letter",isFn:!1},{small:"ц",shift:"Ц",code:"KeyW",type:"letter",isFn:!1},{small:"у",shift:"У",code:"KeyE",type:"letter",isFn:!1},{small:"к",shift:"К",code:"KeyR",type:"letter",isFn:!1},{small:"е",shift:"Е",code:"KeyT",type:"letter",isFn:!1},{small:"н",shift:"Н",code:"KeyY",type:"letter",isFn:!1},{small:"г",shift:"Г",code:"KeyU",type:"letter",isFn:!1},{small:"ш",shift:"Ш",code:"KeyI",type:"letter",isFn:!1},{small:"щ",shift:"Щ",code:"KeyO",type:"letter",isFn:!1},{small:"з",shift:"З",code:"KeyP",type:"letter",isFn:!1},{small:"х",shift:"Х",code:"BracketLeft",type:"letter",isFn:!1},{small:"ъ",shift:"Ъ",code:"BracketRight",type:"letter",isFn:!1},{small:"\\",shift:"/",code:"Backslash",type:"letter",isFn:!1},{small:"Delete",shift:"Delete",code:"Delete",type:"fn",isFn:!0},{small:"CapsLock",shift:"CapsLock",code:"CapsLock",type:"fn",isFn:!0},{small:"ф",shift:"Ф",code:"KeyA",type:"letter",isFn:!1},{small:"ы",shift:"Ы",code:"KeyS",type:"letter",isFn:!1},{small:"в",shift:"В",code:"KeyD",type:"letter",isFn:!1},{small:"а",shift:"А",code:"KeyF",type:"letter",isFn:!1},{small:"п",shift:"П",code:"KeyG",type:"letter",isFn:!1},{small:"р",shift:"Р",code:"KeyH",type:"letter",isFn:!1},{small:"о",shift:"О",code:"KeyJ",type:"letter",isFn:!1},{small:"л",shift:"Л",code:"KeyK",type:"letter",isFn:!1},{small:"д",shift:"Д",code:"KeyL",type:"letter",isFn:!1},{small:"ж",shift:"Ж",code:"Semicolon",type:"letter",isFn:!1},{small:"э",shift:"Э",code:"Quote",type:"letter",isFn:!1},{small:"Enter",shift:"Enter",code:"Enter",type:"fn",isFn:!0},{small:"Shift",shift:"Shift",code:"ShiftLeft",type:"fn",isFn:!0},{small:"я",shift:"Я",code:"KeyZ",type:"letter",isFn:!1},{small:"ч",shift:"Ч",code:"KeyX",type:"letter",isFn:!1},{small:"с",shift:"С",code:"KeyC",type:"letter",isFn:!1},{small:"м",shift:"М",code:"KeyV",type:"letter",isFn:!1},{small:"и",shift:"И",code:"KeyB",type:"letter",isFn:!1},{small:"т",shift:"Т",code:"KeyN",type:"letter",isFn:!1},{small:"ь",shift:"Ь",code:"KeyM",type:"letter",isFn:!1},{small:"б",shift:"Б",code:"Comma",type:"letter",isFn:!1},{small:"ю",shift:"Ю",code:"Period",type:"letter",isFn:!1},{small:".",shift:",",code:"Slash",type:"letter",isFn:!1},{small:"↑",shift:"↑",code:"ArrowUp",type:"fn",isFn:!0},{small:"Shift",shift:"Shift",code:"ShiftRight",type:"fn",isFn:!0},{small:"Ctrl",shift:"Ctrl",code:"ControlLeft",type:"fn",isFn:!0},{small:"Win",shift:"Win",code:"MetaLeft",type:"fn",isFn:!0},{small:"Alt",shift:"Alt",code:"AltLeft",type:"fn",isFn:!0},{small:" ",shift:" ",code:"Space",type:"letter",isFn:!1},{small:"Alt",shift:"Alt",code:"AltRight",type:"fn",isFn:!0},{small:"Ctrl",shift:"Ctrl",code:"ControlRight",type:"fn",isFn:!0},{small:"←",shift:"←",code:"ArrowLeft",type:"fn",isFn:!0},{small:"↓",shift:"↓",code:"ArrowDown",type:"fn",isFn:!0},{small:"→",shift:"→",code:"ArrowRight",type:"fn",isFn:!0}],t=[{small:"`",shift:"~",code:"Backquote",type:"digit",isFn:!1},{small:"1",shift:"!",code:"Digit1",type:"digit",isFn:!1},{small:"2",shift:"@",code:"Digit2",type:"digit",isFn:!1},{small:"3",shift:"#",code:"Digit3",type:"digit",isFn:!1},{small:"4",shift:"$",code:"Digit4",type:"digit",isFn:!1},{small:"5",shift:"%",code:"Digit5",type:"digit",isFn:!1},{small:"6",shift:"^",code:"Digit6",type:"digit",isFn:!1},{small:"7",shift:"&",code:"Digit7",type:"digit",isFn:!1},{small:"8",shift:"*",code:"Digit8",type:"digit",isFn:!1},{small:"9",shift:"(",code:"Digit9",type:"digit",isFn:!1},{small:"0",shift:")",code:"Digit0",type:"digit",isFn:!1},{small:"-",shift:"_",code:"Minus",type:"digit",isFn:!1},{small:"=",shift:"+",code:"Equal",type:"digit",isFn:!1},{small:"Backspace",shift:"Backspace",code:"Backspace",type:"fn",isFn:!0},{small:"Tab",shift:"Tab",code:"Tab",type:"fn",isFn:!0},{small:"q",shift:"Q",code:"KeyQ",type:"letter",isFn:!1},{small:"w",shift:"W",code:"KeyW",type:"letter",isFn:!1},{small:"e",shift:"E",code:"KeyE",type:"letter",isFn:!1},{small:"r",shift:"R",code:"KeyR",type:"letter",isFn:!1},{small:"t",shift:"T",code:"KeyT",type:"letter",isFn:!1},{small:"y",shift:"Y",code:"KeyY",type:"letter",isFn:!1},{small:"u",shift:"U",code:"KeyU",type:"letter",isFn:!1},{small:"i",shift:"I",code:"KeyI",type:"letter",isFn:!1},{small:"o",shift:"O",code:"KeyO",type:"letter",isFn:!1},{small:"p",shift:"P",code:"KeyP",type:"letter",isFn:!1},{small:"[",shift:"{",code:"BracketLeft",type:"letter",isFn:!1},{small:"]",shift:"}",code:"BracketRight",type:"letter",isFn:!1},{small:"\\",shift:"|",code:"Backslash",type:"letter",isFn:!1},{small:"Delete",shift:"Delete",code:"Delete",type:"fn",isFn:!0},{small:"CapsLock",shift:"CapsLock",code:"CapsLock",type:"fn",isFn:!0},{small:"a",shift:"A",code:"KeyA",type:"letter",isFn:!1},{small:"s",shift:"S",code:"KeyS",type:"letter",isFn:!1},{small:"d",shift:"D",code:"KeyD",type:"letter",isFn:!1},{small:"f",shift:"F",code:"KeyF",type:"letter",isFn:!1},{small:"g",shift:"G",code:"KeyG",type:"letter",isFn:!1},{small:"h",shift:"H",code:"KeyH",type:"letter",isFn:!1},{small:"j",shift:"J",code:"KeyJ",type:"letter",isFn:!1},{small:"k",shift:"K",code:"KeyK",type:"letter",isFn:!1},{small:"l",shift:"L",code:"KeyL",type:"letter",isFn:!1},{small:";",shift:":",code:"Semicolon",type:"letter",isFn:!1},{small:"'",shift:'"',code:"Quote",type:"letter",isFn:!1},{small:"Enter",shift:"Enter",code:"Enter",type:"fn",isFn:!0},{small:"Shift",shift:"Shift",code:"ShiftLeft",type:"fn",isFn:!0},{small:"z",shift:"Z",code:"KeyZ",type:"letter",isFn:!1},{small:"x",shift:"X",code:"KeyX",type:"letter",isFn:!1},{small:"c",shift:"C",code:"KeyC",type:"letter",isFn:!1},{small:"v",shift:"v",code:"KeyV",type:"letter",isFn:!1},{small:"b",shift:"B",code:"KeyB",type:"letter",isFn:!1},{small:"n",shift:"N",code:"KeyN",type:"letter",isFn:!1},{small:"m",shift:"M",code:"KeyM",type:"letter",isFn:!1},{small:",",shift:"<",code:"Comma",type:"letter",isFn:!1},{small:".",shift:">",code:"Period",type:"letter",isFn:!1},{small:"/",shift:"?",code:"Slash",type:"letter",isFn:!1},{small:"↑",shift:"↑",code:"ArrowUp",type:"fn",isFn:!0},{small:"Shift",shift:"Shift",code:"ShiftRight",type:"fn",isFn:!0},{small:"Ctrl",shift:"Ctrl",code:"ControlLeft",type:"fn",isFn:!0},{small:"Win",shift:"Win",code:"MetaLeft",type:"fn",isFn:!0},{small:"Alt",shift:"Alt",code:"AltLeft",type:"fn",isFn:!0},{small:" ",shift:" ",code:"Space",type:"letter",isFn:!1},{small:"Alt",shift:"Alt",code:"AltRight",type:"fn",isFn:!0},{small:"Ctrl",shift:"Ctrl",code:"ControlRight",type:"fn",isFn:!0},{small:"←",shift:"←",code:"ArrowLeft",type:"fn",isFn:!0},{small:"↓",shift:"↓",code:"ArrowDown",type:"fn",isFn:!0},{small:"→",shift:"→",code:"ArrowRight",type:"fn",isFn:!0}];class s{constructor({small:e,shift:t,code:s,type:i,isFn:l}){this.small=e,this.shift=t,this.code=s,this.type=i,this.isFn=l,this.subLetter=this.createSub(),this.letter=this.createLetter(),this.containerKey=this.createKey()}createSub(){const e=document.createElement("p");return e.className="sub",e.innerHTML=this.shift,e}createLetter(){const e=document.createElement("p");return e.className="letter",e.innerHTML=this.small,e}createKey(){const e=document.createElement("div");return e.className=`key ${this.type}`,this.isFn&&e.classList.add(this.small),"Space"===this.code&&e.classList.add("Space"),e.dataset.code=this.code,e.dataset.fn=this.isFn,e.append(this.subLetter,this.letter),e}}let i=window.localStorage.getItem("lang")||"ru",l="";const n=()=>{"ru"===i?l=e:"en"===i&&(l=t)};n();const a=document.createElement("main");a.className="main",a.innerHTML="<h1 class='title'>RSS Виртуальная клавиатура</h1>\n<p class='text'>RSS Виртуальная клавиатура</p>\n<p class='text'>Для переключения языка комбинация: левыe ctrl + alt</p>";const c=document.createElement("textarea");c.className="out",c.setAttribute("rows","10"),c.setAttribute("cols","70"),c.setAttribute("spellcheck","false"),c.setAttribute("autofocus",""),a.append(c),document.body.prepend(a);const o=new class{constructor(e,t){this.rows=e,this.keys=[],this.keyPressed={},this.caps=!1,this.keyBase=t}generate(){this.container=document.createElement("div"),this.container.className="keyboard",this.rows.forEach((e=>{const t=document.createElement("div");t.className="keyboard__row",this.container.append(t),e.forEach((e=>{const i=this.keyBase.find((t=>t.code===e)),l=new s(i);this.keys.push(l),t.append(l.containerKey)}))}))}}([["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete"],["CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter"],["ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight"],["ControlLeft","MetaLeft","AltLeft","Space","AltRight","ArrowLeft","ArrowDown","ArrowRight","ControlRight"]],l);function d(){i="ru"===i?"en":"ru",window.localStorage.setItem("lang",i),n(),o.keyBase=l,o.keys.forEach((e=>{const t=l.find((t=>t.code===e.code));e.letter.innerHTML=t.small,e.small=t.small,e.subLetter.innerHTML=t.shift,e.shift=t.shift,"Backquote"===e.code&&(e.type=t.type,e.containerKey.classList.remove("letter"),e.containerKey.classList.remove("digit"),"digit"===t.type?e.containerKey.classList.add("digit"):e.containerKey.classList.add("letter"))}))}function r(e){if(e){if(c.selectionEnd>=c.value.length)return;c.setRangeText("",c.selectionStart,c.selectionEnd+1,"end")}else{if(c.selectionStart<=0)return;c.setRangeText("",c.selectionStart-1,c.selectionEnd,"end")}}function y(e){"ShiftRight"!==e.code&&"ShiftLeft"!==e.code||o.keys.forEach((e=>{e.isFn||e.containerKey.classList.remove("key_shift")}))}o.generate(),a.append(o.container);const f=e=>{"letter"===e.type&&function(e){const t=o.keyPressed.ShiftLeft||o.keyPressed.ShiftRight;o.keyPressed.CapsLock&&t?c.setRangeText(e.small,c.selectionStart,c.selectionEnd,"end"):o.keyPressed.CapsLock||t?c.setRangeText(e.shift,c.selectionStart,c.selectionEnd,"end"):c.setRangeText(e.small,c.selectionStart,c.selectionEnd,"end")}(e),"digit"===e.type&&function(e){o.keyPressed.ShiftLeft||o.keyPressed.ShiftRight?c.setRangeText(e.shift,c.selectionStart,c.selectionEnd,"end"):c.setRangeText(e.small,c.selectionStart,c.selectionEnd,"end")}(e),e.isFn&&function(e){"ShiftRight"!==e.code&&"ShiftLeft"!==e.code||o.keys.forEach((e=>{e.isFn||e.containerKey.classList.add("key_shift")})),"ControlLeft"===e.code&&o.keyPressed.AltLeft&&d(),"AltLeft"===e.code&&o.keyPressed.ControlLeft&&d(),"Enter"===e.code&&c.setRangeText("\n",c.selectionStart,c.selectionEnd,"end"),"ArrowUp"!==e.code&&"ArrowLeft"!==e.code&&"ArrowDown"!==e.code&&"ArrowRight"!==e.code||function(e){c.setRangeText(e.small,c.selectionStart,c.selectionEnd,"end")}(e),"Backspace"===e.code&&r(0),"Delete"===e.code&&r(1),"CapsLock"===e.code&&function(e){if(!o.caps)return o.caps=!0,o.container.classList.add("caps__pressed"),void e.containerKey.classList.add("caps__aktive");o.caps&&(o.caps=!1,o.container.classList.remove("caps__pressed"),e.containerKey.classList.remove("caps__aktive"))}(e)}(e)},h=e=>{const t=e.target.closest(".key");if(!t)return;t.classList.remove("key_pressed"),o.keyPressed[t.dataset.code]=!1;const s=o.keys.find((e=>t.dataset.code===e.code));s.isFn&&y(s)};o.container.addEventListener("mousedown",(e=>{const t=e.target.closest(".key");if(!t)return;t.classList.add("key_pressed"),o.keyPressed[t.dataset.code]||(o.keyPressed[t.dataset.code]=!0);const s=o.keys.find((e=>t.dataset.code===e.code));f(s)})),document.addEventListener("keydown",(e=>{e.preventDefault();const t=o.keys.find((t=>e.code===t.code));t.containerKey.classList.add("key_pressed"),o.keyPressed[t.containerKey.dataset.code]||(o.keyPressed[t.containerKey.dataset.code]=!0),f(t)})),o.container.addEventListener("mouseup",h),document.addEventListener("keyup",(e=>{const t=o.keys.find((t=>e.code===t.code));t.containerKey.classList.remove("key_pressed"),o.keyPressed[t.containerKey.dataset.code]=!1,t.isFn&&y(t)})),o.container.addEventListener("mouseout",h)})()})();