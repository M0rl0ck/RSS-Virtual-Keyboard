(()=>{"use strict";(()=>{class e{constructor({small:e,shift:t,code:s,type:i,isFn:l}){this.small=e,this.shift=t,this.code=s,this.type=i,this.isFn=l,this.subLetter=this.createSub(),this.letter=this.createLetter(),this.containerKey=this.createKey()}createSub(){const e=document.createElement("p");return e.className="sub",e.innerHTML=this.shift,e}createLetter(){const e=document.createElement("p");return e.className="letter",e.innerHTML=this.small,e}createKey(){const e=document.createElement("div");return e.className=`key ${this.type}`,this.isFn&&e.classList.add(this.small),"Space"===this.code&&e.classList.add("Space"),e.dataset.code=this.code,e.dataset.fn=this.isFn,e.append(this.subLetter,this.letter),e}}const t=JSON.parse(window.localStorage.getItem("lang"))||"ru";let s="";"ru"===t?s=[{small:"ё",shift:"Ё",code:"Backquote",type:"letter",isFn:!1},{small:"1",shift:"!",code:"Digit1",type:"digit",isFn:!1},{small:"2",shift:'"',code:"Digit2",type:"digit",isFn:!1},{small:"3",shift:"№",code:"Digit3",type:"digit",isFn:!1},{small:"4",shift:";",code:"Digit4",type:"digit",isFn:!1},{small:"5",shift:"%",code:"Digit5",type:"digit",isFn:!1},{small:"6",shift:":",code:"Digit6",type:"digit",isFn:!1},{small:"7",shift:"?",code:"Digit7",type:"digit",isFn:!1},{small:"8",shift:"*",code:"Digit8",type:"digit",isFn:!1},{small:"9",shift:"(",code:"Digit9",type:"digit",isFn:!1},{small:"0",shift:")",code:"Digit0",type:"digit",isFn:!1},{small:"-",shift:"_",code:"Minus",type:"digit",isFn:!1},{small:"=",shift:"+",code:"Equal",type:"digit",isFn:!1},{small:"Backspace",shift:"Backspace",code:"Backspace",type:"fn",isFn:!0},{small:"Tab",shift:"Tab",code:"Tab",type:"fn",isFn:!0},{small:"й",shift:"Й",code:"KeyQ",type:"letter",isFn:!1},{small:"ц",shift:"Ц",code:"KeyW",type:"letter",isFn:!1},{small:"у",shift:"У",code:"KeyE",type:"letter",isFn:!1},{small:"к",shift:"К",code:"KeyR",type:"letter",isFn:!1},{small:"е",shift:"Е",code:"KeyT",type:"letter",isFn:!1},{small:"н",shift:"Н",code:"KeyY",type:"letter",isFn:!1},{small:"г",shift:"Г",code:"KeyU",type:"letter",isFn:!1},{small:"ш",shift:"Ш",code:"KeyI",type:"letter",isFn:!1},{small:"щ",shift:"Щ",code:"KeyO",type:"letter",isFn:!1},{small:"з",shift:"З",code:"KeyP",type:"letter",isFn:!1},{small:"х",shift:"Х",code:"BracketLeft",type:"letter",isFn:!1},{small:"ъ",shift:"Ъ",code:"BracketRight",type:"letter",isFn:!1},{small:"\\",shift:"/",code:"Backslash",type:"letter",isFn:!1},{small:"Delete",shift:"Delete",code:"Delete",type:"fn",isFn:!0},{small:"CapsLock",shift:"CapsLock",code:"CapsLock",type:"fn",isFn:!0},{small:"ф",shift:"Ф",code:"KeyA",type:"letter",isFn:!1},{small:"ы",shift:"Ы",code:"KeyS",type:"letter",isFn:!1},{small:"в",shift:"В",code:"KeyD",type:"letter",isFn:!1},{small:"а",shift:"А",code:"KeyF",type:"letter",isFn:!1},{small:"п",shift:"П",code:"KeyG",type:"letter",isFn:!1},{small:"р",shift:"Р",code:"KeyH",type:"letter",isFn:!1},{small:"о",shift:"О",code:"KeyJ",type:"letter",isFn:!1},{small:"л",shift:"Л",code:"KeyK",type:"letter",isFn:!1},{small:"д",shift:"Д",code:"KeyL",type:"letter",isFn:!1},{small:"ж",shift:"Ж",code:"Semicolon",type:"letter",isFn:!1},{small:"э",shift:"Э",code:"Quote",type:"letter",isFn:!1},{small:"Enter",shift:"Enter",code:"Enter",type:"fn",isFn:!0},{small:"Shift",shift:"Shift",code:"ShiftLeft",type:"fn",isFn:!0},{small:"я",shift:"Я",code:"KeyZ",type:"letter",isFn:!1},{small:"ч",shift:"Ч",code:"KeyX",type:"letter",isFn:!1},{small:"с",shift:"С",code:"KeyC",type:"letter",isFn:!1},{small:"м",shift:"М",code:"KeyV",type:"letter",isFn:!1},{small:"и",shift:"И",code:"KeyB",type:"letter",isFn:!1},{small:"т",shift:"Т",code:"KeyN",type:"letter",isFn:!1},{small:"ь",shift:"Ь",code:"KeyM",type:"letter",isFn:!1},{small:"б",shift:"Б",code:"Comma",type:"letter",isFn:!1},{small:"ю",shift:"Ю",code:"Period",type:"letter",isFn:!1},{small:".",shift:",",code:"Slash",type:"letter",isFn:!1},{small:"&#8593",shift:"&#8593",code:"ArrowUp",type:"fn",isFn:!0},{small:"Shift",shift:"Shift",code:"ShiftRight",type:"fn",isFn:!0},{small:"Ctrl",shift:"Ctrl",code:"ControlLeft",type:"fn",isFn:!0},{small:"Win",shift:"Win",code:"MetaLeft",type:"fn",isFn:!0},{small:"Alt",shift:"Alt",code:"AltLeft",type:"fn",isFn:!0},{small:" ",shift:" ",code:"Space",type:"letter",isFn:!1},{small:"Alt",shift:"Alt",code:"AltRight",type:"fn",isFn:!0},{small:"Ctrl",shift:"Ctrl",code:"ControlRight",type:"fn",isFn:!0},{small:"&#8592",shift:"&#8592",code:"ArrowLeft",type:"fn",isFn:!0},{small:"&#8595",shift:"&#8595",code:"ArrowDown",type:"fn",isFn:!0},{small:"&#8594",shift:"&#8594",code:"ArrowRight",type:"fn",isFn:!0}]:"en"===t&&(s=[{small:"`",shift:"~",code:"Backquote",type:"digit",isFn:!1},{small:"1",shift:"!",code:"Digit1",type:"digit",isFn:!1},{small:"2",shift:"@",code:"Digit2",type:"digit",isFn:!1},{small:"3",shift:"#",code:"Digit3",type:"digit",isFn:!1},{small:"4",shift:"$",code:"Digit4",type:"digit",isFn:!1},{small:"5",shift:"%",code:"Digit5",type:"digit",isFn:!1},{small:"6",shift:"^",code:"Digit6",type:"digit",isFn:!1},{small:"7",shift:"&",code:"Digit7",type:"digit",isFn:!1},{small:"8",shift:"*",code:"Digit8",type:"digit",isFn:!1},{small:"9",shift:"(",code:"Digit9",type:"digit",isFn:!1},{small:"0",shift:")",code:"Digit0",type:"digit",isFn:!1},{small:"-",shift:"_",code:"Minus",type:"digit",isFn:!1},{small:"=",shift:"+",code:"Equal",type:"digit",isFn:!1},{small:"Backspace",shift:"Backspace",code:"Backspace",type:"fn",isFn:!0},{small:"Tab",shift:"Tab",code:"Tab",type:"fn",isFn:!0},{small:"q",shift:"Q",code:"KeyQ",type:"letter",isFn:!1},{small:"w",shift:"W",code:"KeyW",type:"letter",isFn:!1},{small:"e",shift:"E",code:"KeyE",type:"letter",isFn:!1},{small:"r",shift:"R",code:"KeyR",type:"letter",isFn:!1},{small:"t",shift:"T",code:"KeyT",type:"letter",isFn:!1},{small:"y",shift:"Y",code:"KeyY",type:"letter",isFn:!1},{small:"u",shift:"U",code:"KeyU",type:"letter",isFn:!1},{small:"i",shift:"I",code:"KeyI",type:"letter",isFn:!1},{small:"o",shift:"O",code:"KeyO",type:"letter",isFn:!1},{small:"p",shift:"P",code:"KeyP",type:"letter",isFn:!1},{small:"[",shift:"{",code:"BracketLeft",type:"letter",isFn:!1},{small:"]",shift:"}",code:"BracketRight",type:"letter",isFn:!1},{small:"\\",shift:"|",code:"Backslash",type:"letter",isFn:!1},{small:"Delete",shift:"Delete",code:"Delete",type:"fn",isFn:!0},{small:"CapsLock",shift:"CapsLock",code:"CapsLock",type:"fn",isFn:!0},{small:"a",shift:"A",code:"KeyA",type:"letter",isFn:!1},{small:"s",shift:"S",code:"KeyS",type:"letter",isFn:!1},{small:"d",shift:"D",code:"KeyD",type:"letter",isFn:!1},{small:"f",shift:"F",code:"KeyF",type:"letter",isFn:!1},{small:"g",shift:"G",code:"KeyG",type:"letter",isFn:!1},{small:"h",shift:"H",code:"KeyH",type:"letter",isFn:!1},{small:"j",shift:"J",code:"KeyJ",type:"letter",isFn:!1},{small:"k",shift:"K",code:"KeyK",type:"letter",isFn:!1},{small:"l",shift:"L",code:"KeyL",type:"letter",isFn:!1},{small:";",shift:":",code:"Semicolon",type:"letter",isFn:!1},{small:"'",shift:'"',code:"Quote",type:"letter",isFn:!1},{small:"Enter",shift:"Enter",code:"Enter",type:"fn",isFn:!0},{small:"Shift",shift:"Shift",code:"ShiftLeft",type:"fn",isFn:!0},{small:"z",shift:"Z",code:"KeyZ",type:"letter",isFn:!1},{small:"x",shift:"X",code:"KeyX",type:"letter",isFn:!1},{small:"c",shift:"C",code:"KeyC",type:"letter",isFn:!1},{small:"v",shift:"v",code:"KeyV",type:"letter",isFn:!1},{small:"b",shift:"B",code:"KeyB",type:"letter",isFn:!1},{small:"n",shift:"N",code:"KeyN",type:"letter",isFn:!1},{small:"m",shift:"M",code:"KeyM",type:"letter",isFn:!1},{small:",",shift:"<",code:"Comma",type:"letter",isFn:!1},{small:".",shift:">",code:"Period",type:"letter",isFn:!1},{small:"/",shift:"?",code:"Slash",type:"letter",isFn:!1},{small:"&#8593",shift:"&#8593",code:"ArrowUp",type:"fn",isFn:!0},{small:"Shift",shift:"Shift",code:"ShiftRight",type:"fn",isFn:!0},{small:"Ctrl",shift:"Ctrl",code:"ControlLeft",type:"fn",isFn:!0},{small:"Win",shift:"Win",code:"MetaLeft",type:"fn",isFn:!0},{small:"Alt",shift:"Alt",code:"AltLeft",type:"fn",isFn:!0},{small:" ",shift:" ",code:"Space",type:"letter",isFn:!1},{small:"Alt",shift:"Alt",code:"AltRight",type:"fn",isFn:!0},{small:"Ctrl",shift:"Ctrl",code:"ControlRight",type:"fn",isFn:!0},{small:"&#8592",shift:"&#8592",code:"ArrowLeft",type:"fn",isFn:!0},{small:"&#8595",shift:"&#8595",code:"ArrowDown",type:"fn",isFn:!0},{small:"&#8594",shift:"&#8594",code:"ArrowRight",type:"fn",isFn:!0}]);const i=document.createElement("main");i.className="main",i.innerHTML="<h1 class='title'>RSS Виртуальная клавиатура</h1>\n<p class='text'>RSS Виртуальная клавиатура</p>\n<p class='text'>Для переключения языка комбинация: левыe ctrl + alt</p>";const l=document.createElement("textarea");l.className="out",l.setAttribute("rows","10"),l.setAttribute("cols","70"),l.setAttribute("spellcheck","false"),l.setAttribute("autofocus",""),i.append(l),document.body.prepend(i);const n=new class{constructor(e,t){this.rows=e,this.keys=[],this.keyPressed={},this.caps=!1,this.keyBase=t}generate(){this.container=document.createElement("div"),this.container.className="keyboard",this.rows.forEach((t=>{const s=document.createElement("div");s.className="keyboard__row",this.container.append(s),t.forEach((t=>{const i=this.keyBase.find((e=>e.code===t)),l=new e(i);this.keys.push(l),s.append(l.containerKey)}))}))}}([["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace"],["Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete"],["CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter"],["ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight"],["ControlLeft","MetaLeft","AltLeft","Space","AltRight","ArrowLeft","ArrowDown","ArrowRight","ControlRight"]],s);n.generate(),i.append(n.container);const a=e=>{const t=e.target.closest(".key");if(!t)return;t.classList.remove("key_pressed"),n.keyPressed[t.dataset.code]=!1;const s=n.keys.find((e=>t.dataset.code===e.code));s.isFn&&function(e){"ShiftRight"!==e.code&&"ShiftLeft"!==e.code||n.keys.forEach((e=>{e.isFn||e.containerKey.classList.remove("key_shift")}))}(s)};n.container.addEventListener("mousedown",(e=>{const t=e.target.closest(".key");if(!t)return;t.classList.add("key_pressed"),n.keyPressed[t.dataset.code]||(n.keyPressed[t.dataset.code]=!0);const s=n.keys.find((e=>t.dataset.code===e.code));"letter"===s.type&&function(e){const t=n.keyPressed.ShiftLeft||n.keyPressed.ShiftRight;n.keyPressed.CapsLock&&t?l.setRangeText(e.small,l.selectionStart,l.selectionEnd,"end"):n.keyPressed.CapsLock||t?l.setRangeText(e.shift,l.selectionStart,l.selectionEnd,"end"):l.setRangeText(e.small,l.selectionStart,l.selectionEnd,"end")}(s),"digit"===s.type&&function(e){n.keyPressed.ShiftLeft||n.keyPressed.ShiftRight?l.setRangeText(e.shift,l.selectionStart,l.selectionEnd,"end"):l.setRangeText(e.small,l.selectionStart,l.selectionEnd,"end")}(s),s.isFn&&function(e){"ShiftRight"!==e.code&&"ShiftLeft"!==e.code||n.keys.forEach((e=>{e.isFn||e.containerKey.classList.add("key_shift")}))}(s)})),document.addEventListener("keydown",(e=>{e.preventDefault();const t=n.keys.find((t=>e.code===t.code));t.containerKey.classList.add("key_pressed"),n.keyPressed[t.containerKey.dataset.code]||(n.keyPressed[t.containerKey.dataset.code]=!0)})),n.container.addEventListener("mouseup",a),document.addEventListener("keyup",(e=>{const t=n.keys.find((t=>e.code===t.code));t.containerKey.classList.remove("key_pressed"),n.keyPressed[t.containerKey.dataset.code]=!1})),n.container.addEventListener("mouseout",a)})()})();